<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <script src="/horizon/horizon.js"></script>
    <script>
      var horizon = Horizon();
      horizon.onReady(function() {
        document.querySelector('h1').innerHTML = 'source works!'

        const chat = horizon('messages');

        let message = {
          text: "What a beautiful horizon!",
          datetime: new Date(),
          author: "@dalanmiller"
        };

        chat.store(message);

        chat.fetch().subscribe(
          items => {
            items.forEach((item) => {
              // Each result from the chat collection
              //  will pass through this function
              console.log(item);
            })
          },
          // If an error occurs, this function
          //  will execute with the `err` message
          err => {
            console.log(err);
          })

      });
      horizon.connect();
    </script>
  </head>
  <body>
   <marquee direction="left"><h1></h1></marquee>
  </body>
</html>
